import{r,a as b,ae as E,af as L,y as i,j as e,L as N}from"./index-BKTyCQbG.js";import{u as S,c as y,b as u,h as m}from"./handleClassess-DLkxagLu.js";import{S as k}from"./Spinner-DGg7lN7S.js";const O=()=>{const[t,f]=r.useState(!1),a=b(),[p,{isSuccess:c,isError:l,isLoading:h,error:x}]=E(),[j,{isSuccess:n,isError:d,isLoading:g,error:v}]=L(),s=S({initialValues:{userName:"",otp:""},validationSchema:y({userName:u().required("Enter userName"),otp:u()}),onSubmit:(o,{resetForm:F})=>{t?j(o):p(o)}});return r.useEffect(()=>{c&&(s.setFieldValue("otp",""),f(!0),i.success("please verify otp"))},[c]),r.useEffect(()=>{l&&i.error(x.message)},[l]),r.useEffect(()=>{n&&(i.success("login success"),a("/"))},[n]),r.useEffect(()=>{d&&i.error(v.message)},[d]),r.useEffect(()=>{localStorage.getItem("customer")&&a("/")},[a]),g||h?e.jsxs(e.Fragment,{children:["please wait...",e.jsx(k,{})]}):e.jsx(e.Fragment,{children:e.jsx("form",{onSubmit:s.handleSubmit,children:e.jsx("div",{class:"container",children:e.jsx("div",{class:"row",children:e.jsx("div",{class:"col-sm-6 offset-sm-3",children:e.jsxs("div",{class:"card",children:[e.jsx("div",{class:"card-header",children:"Login"}),e.jsxs("div",{class:"card-body",children:[t?e.jsxs("div",{children:[e.jsx("label",{for:"email",class:"form-label",children:"Otp"}),e.jsx("input",{type:"text",className:m(s,"otp"),...s.getFieldProps("otp"),id:"otp",placeholder:"Enter Otp send to you"}),e.jsx("div",{class:"valid-feedback",children:"Looks good!"}),e.jsx("div",{class:"invalid-feedback",children:s.errors.otp})]}):e.jsxs("div",{children:[e.jsx("label",{for:"email",class:"form-label",children:"UserName"}),e.jsx("input",{type:"text",className:m(s,"userName"),...s.getFieldProps("userName"),id:"userName",placeholder:"Enter Your Email or Mobile"}),e.jsx("div",{class:"valid-feedback",children:"Looks good!"}),e.jsx("div",{class:"invalid-feedback",children:s.errors.userName})]}),e.jsx("button",{type:"submit",className:`btn w-100 mt-3 ${t?"btn-warning":"btn-primary"}`,children:t?"verify otp":"Login"}),e.jsxs("p",{class:"text-center mt-3",children:["Dont Have Account? ",e.jsx(N,{to:"/customer-register",children:e.jsx("a",{href:"#",children:"Create Account"})})]})]})]})})})})})})};export{O as default};
