import{a as P,f as w,m as E,n as F,r as d,y,j as e}from"./index-BKTyCQbG.js";import{u as S,c as k,a as x,b as p,h as n}from"./handleClassess-DLkxagLu.js";const H=()=>{const m=P(),{state:c}=w(),r=c==null?void 0:c.editData,l=!!r,[f,{isSuccess:h,isLoading:j}]=E(),[N,{isSuccess:u,isLoading:v}]=F(),[g,L]=d.useState((r==null?void 0:r.license)||null),[b,A]=d.useState((r==null?void 0:r.img)||[]),a=S({initialValues:{name:(r==null?void 0:r.name)||"",ptype:(r==null?void 0:r.ptype)||"",address:(r==null?void 0:r.address)||"",license:"",img:[]},validationSchema:k({name:p().required("Enter property Name"),ptype:p().required("Enter property type"),address:p().required("Enter property address"),license:x().test("license-validation","Only JPG, PNG images are allowed",function(s){return s?["image/jpeg","image/png","image/jpg"].includes(s.type):!!l}),img:x().test("img-validation","Only JPG, PNG images are allowed",function(s){return!s||s.length===0?!!l:s.every(t=>["image/jpeg","image/png","image/jpg"].includes(t.type))})}),onSubmit:(s,{resetForm:t})=>{const i=new FormData;i.append("name",s.name),i.append("ptype",s.ptype),i.append("address",s.address),l?(s.license&&i.append("license",s.license),s.img&&s.img.length>0&&s.img.forEach(o=>i.append("img",o)),N({id:r._id,formData:i})):(i.append("license",s.license),s.img.forEach(o=>i.append("img",o)),f(i)),t()}});return d.useEffect(()=>{h&&(y.success("Property added successfully"),m("/owner/allproperty"))},[h]),d.useEffect(()=>{u&&(y.success("Property update successfully"),m("/owner/allproperty"))},[u]),e.jsx("form",{onSubmit:a.handleSubmit,encType:"multipart/form-data",children:e.jsx("div",{className:"container mt-5",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-sm-6 offset-sm-3",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:"Register Property"}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"form-label",children:"Property Name"}),e.jsx("input",{type:"text",id:"name",className:n(a,"name"),placeholder:"Enter property name",...a.getFieldProps("name")}),e.jsx("div",{className:"invalid-feedback",children:a.errors.name})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{htmlFor:"ptype",className:"form-label",children:"Property Type"}),e.jsxs("select",{id:"ptype",className:n(a,"ptype"),...a.getFieldProps("ptype"),children:[e.jsx("option",{value:"",children:"-- Select Property Type --"}),e.jsx("option",{value:"hotel",children:"Hotel"}),e.jsx("option",{value:"hostel",children:"Hostel"}),e.jsx("option",{value:"house",children:"House"}),e.jsx("option",{value:"apartment",children:"Apartment"}),e.jsx("option",{value:"villa",children:"Villa"})]}),e.jsx("div",{className:"invalid-feedback",children:a.errors.ptype})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{htmlFor:"address",className:"form-label",children:"Property Address"}),e.jsx("input",{type:"text",id:"address",className:n(a,"address"),placeholder:"Enter property address",...a.getFieldProps("address")}),e.jsx("div",{className:"invalid-feedback",children:a.errors.address})]}),g&&e.jsx("img",{src:g,height:"80",alt:"license"}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{htmlFor:"license",className:"form-label",children:"Property License"}),e.jsx("input",{type:"file",id:"license",className:n(a,"license"),onChange:s=>a.setFieldValue("license",s.target.files[0])}),e.jsx("div",{className:"invalid-feedback",children:a.errors.license})]}),e.jsx("div",{className:"d-flex gap-2 flex-wrap",children:b.map((s,t)=>e.jsx("img",{src:s,height:"60",alt:"property"},t))}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{htmlFor:"img",className:"form-label",children:"Property Images"}),e.jsx("input",{type:"file",id:"img",className:n(a,"img"),multiple:!0,onChange:s=>a.setFieldValue("img",Array.from(s.target.files))}),e.jsx("div",{className:"invalid-feedback",children:a.errors.img})]}),e.jsx("button",{disabled:j||v,type:"submit",className:`btn w-100 mt-3 ${l?"btn-warning":"btn-primary"}`,children:l?"Update Property":"Add Property"})]})]})})})})})};export{H as default};
