import{a as A,u as C,C as N,D as M,E as R,F as E,r as l,y as o,j as e}from"./index-BKTyCQbG.js";import{S as P}from"./Spinner-DGg7lN7S.js";const I=()=>{const m=A(),d=C(s=>s.auth.owner),j=d==null?void 0:d._id,{data:a,isSuccess:c,isLoading:b}=N(j),[y,{isSuccess:n}]=M(),[g,{isSuccess:r}]=R(),[f]=E(),[i,h]=l.useState(""),[x,p]=l.useState(""),[v,u]=l.useState(null),w=async()=>{await g({_id:v,roomType:i,price:x})};return l.useEffect(()=>{c&&o.success("property get success")},[c]),l.useEffect(()=>{n&&o.success("property delete success")},[n]),l.useEffect(()=>{if(r){o.success("Room added successfully"),h(""),p(""),u(null);const s=document.getElementById("exampleModal"),t=window.bootstrap.Modal.getInstance(s);t==null||t.hide()}},[r]),b?e.jsxs(e.Fragment,{children:["please wait...",e.jsx(P,{})]}):e.jsxs(e.Fragment,{children:[a&&e.jsxs("table",{style:{maxWidth:"90%"},class:"table table-light table-hover table-bordered mt-5 mx-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"name"}),e.jsx("th",{scope:"col",children:"type"}),e.jsx("th",{scope:"col",children:"address"}),e.jsx("th",{scope:"col",children:"license"}),e.jsx("th",{scope:"col",children:"images"}),e.jsx("th",{scope:"col",children:"room"}),e.jsx("th",{scope:"col",children:"add"}),e.jsx("th",{scope:"col",children:"allow"}),e.jsx("th",{scope:"col",children:"action"})]})}),e.jsx("tbody",{children:a&&a.result.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.name}),e.jsx("td",{children:s.ptype}),e.jsx("td",{children:s.address}),e.jsx("td",{children:e.jsx("img",{height:"100px",src:s.license,alt:""})}),e.jsx("td",{children:e.jsx("div",{style:{display:"flex",gap:"5px",flexWrap:"wrap"},children:Array.isArray(s.img)&&s.img.map((t,S)=>e.jsx("img",{src:t,alt:"property",height:"60",style:{borderRadius:"5px"}},S))})}),e.jsx("td",{children:s.room&&s.room.length>0?e.jsx("div",{children:s.room.map(t=>e.jsxs("div",{className:"d-flex justify-content-between align-items-center border rounded p-1 mb-1",children:[e.jsxs("span",{children:[t.roomType," – ₹",t.price]}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>f({propertyId:s._id,roomId:t._id}),children:"Delete"})]},t._id))}):e.jsx("span",{className:"text-muted",children:"No rooms"})}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-info",onClick:()=>u(s._id),"data-bs-toggle":"modal","data-bs-target":"#exampleModal",children:"Add"})}),e.jsx("td",{children:s.isAllow?"Allowed":"Not Allowed"}),e.jsxs("td",{children:[e.jsx("button",{onClick:()=>m("/owner",{state:{editData:s}}),type:"button",class:"btn btn-warning",children:"edit"}),e.jsx("button",{onClick:t=>y(s._id),type:"button",class:"btn btn-danger",children:"delete"})]})]},s.id))})]}),e.jsx("div",{class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:e.jsx("div",{class:"modal-dialog",children:e.jsxs("div",{class:"modal-content",children:[e.jsxs("div",{class:"modal-header",children:[e.jsx("h5",{class:"modal-title",id:"exampleModalLabel",children:"Add Rooms"}),e.jsx("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),e.jsx("div",{class:"modal-body",children:e.jsxs("div",{className:"mt-3 d-flex flex-column gap-2",children:[e.jsx("input",{type:"text",value:i,onChange:s=>h(s.target.value),className:"form-control",placeholder:"enter room"}),e.jsx("input",{type:"text",value:x,onChange:s=>p(s.target.value),className:"form-control",placeholder:"enter price"})]})}),e.jsxs("div",{class:"modal-footer",children:[e.jsx("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"}),e.jsx("button",{type:"button",class:"btn btn-primary",onClick:w,children:"Save changes"})]})]})})})]})};export{I as default};
